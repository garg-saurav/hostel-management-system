<%- include('./includes/head.ejs') %>
<link rel="stylesheet" href="../public/css/profile.css">
</head>

<body>
    <%- include('./includes/navigation.ejs') %>
      <br>
      <div class="container">
        <div class="main-body">
            <h3 class="text-center">Modification Requests</h3>
          <hr>
          <div style="padding-bottom: 20px;
              max-height: 75vh;
              overflow-x: hidden;
              overflow-y: auto;
              text-align:justify;">

            <% if (num_requests===0) {%>
              <br>
              <h5>No Modification Requests!</h5>
              <% }%>

                <% requests.forEach((item)=>{%>
                    <div class="card">
                        <div class="card-body">
                            <div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home<%=item.request_id%>" role="tab" aria-controls="home" aria-selected="true">Booking details</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile<%=item.request_id%>" role="tab" aria-controls="profile" aria-selected="false">Customer details</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="tab-content profile-tab" id="myTabContent">
                                            <div class="tab-pane fade show active" id="home<%=item.request_id%>" role="tabpanel" aria-labelledby="home-tab">
                                                <br>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Old start date</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.start_date%></p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>New start date</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.new_start_date%></p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Old end date</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.end_date%></p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>New end date</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.new_end_date%></p>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Building:</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.building_name%></p>
                                                        <p><%=item.addr%></p>
                                                    </div>
                                                </div>
                                                
                                            </div>

                                            <div class="tab-pane fade" id="profile<%=item.request_id%>" role="tabpanel" aria-labelledby="profile-tab">
                                                <br>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Name</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.name%></p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Email</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.email_id%></p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Contact</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><%=item.phone_number%></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <form action="/owner/view_modif_req" method="post">
                                    <input name="request_id" type="hidden" value="<%=item.request_id%>">
                                    <div class="form-group">
                                        <label>Enter Comment</label>
                                        <input type="text" class="form-control" name="comment" required>
                                    </div> <br>
                                    <div class="form-check-inline">
                                        <label><input type="radio" name="approve_or_reject" value="approve" checked>
                                            Approve</label>
                                    </div>
                                    <div class="form-check-inline">
                                        <label><input type="radio" name="approve_or_reject" value="reject">
                                            Reject</label>
                                    </div>
                                    <br><br>
                            
                                    <button type="submit" class="btn btn-primary btn-lg">Submit</button>
                                </form>
                            </div>
                        </div>
                    </div>
            <br>
                        <%});%>
                    
            </div>
        </script>
</body>